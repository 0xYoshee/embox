package embox.mem

module vmem_header {
	@IncludeExport(path="mem")
	source "vmem.h"
}

@DefaultImpl(vmem_nommu)
abstract module vmem_api {
}

module vmem_nommu extends vmem_api {
	@IncludeExport(path="mem",target_name="vmem.h")
	source "vmem_nommu.h"
}

module vmem extends vmem_api {
	option number log_level = 1

	source "vmem.c"
	source "mapper.c"
	source "vmem_context.c"

	depends embox.mem.vmem_alloc
	depends embox.mem.page_api
	depends embox.arch.mmu

	depends embox.mem.mmap_header
	depends embox.mem.mmap
	depends embox.fs.syslib.idesc_mmap_api
	depends vmem_header
	depends embox.kernel.task.kernel_task
	depends embox.kernel.task.resource.mmap
	depends embox.driver.periph_memory_mmap

	depends embox.mem.vmem_device_memory_full
}
